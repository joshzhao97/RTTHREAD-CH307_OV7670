/********************************** (C) COPYRIGHT *******************************
* File Name          : main.c
* Author             : WCH
* Version            : V1.0.0
* Date               : 2021/06/06
* Description        : Main program body.
* Copyright (c) 2021 Nanjing Qinheng Microelectronics Co., Ltd.
* SPDX-License-Identifier: Apache-2.0
*******************************************************************************/
/*  SCL-PB10,SDA-PB11,VS-PA5,HS-PA4,PCLK-PA6,MCLK-PA8,D7-PB9,D6-PB8,D5-PB6,D4-PC11,D3-PC9,D2-PC8,D1-PA10,D0-PA9,RST-PB0（or gnd?）,PWDN-PB1(or gnd?)*/
#include "ch32v30x.h"
#include <rtthread.h>
#include <rthw.h>
#include "drivers/pin.h"
#include <board.h>
#include <drv_spi.h>
#include <dfs_elm.h>
#include <dfs_fs.h>
#include <dfs_posix.h>
#include "drv_spi.h"
#include "spi_msd.h"
#include <rtdbg.h>

/* Global typedef */

u8 temperature[5][128]={
/*--  文字:  当  --*/
/*--  宋体23;  此字体下对应的点阵为：宽x高=31x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=31x32  --*/
0x00,0x00,0x00,0x00,0x10,0x30,0xE0,0xE0,0xC0,0xC0,0x80,0x00,0x00,0x00,0xFC,0xFC,
0xFC,0x08,0x00,0x00,0x00,0xC0,0xF0,0xF0,0x60,0x60,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x20,0x60,0x60,0x20,0x21,0x27,0x27,0x27,0x20,0x20,0x20,0x3F,0x3F,0x3F,
0x20,0x28,0x2E,0x27,0x23,0x21,0x20,0xE0,0xF0,0xF0,0xF0,0x20,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x08,0x18,0x18,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
0x08,0x08,0x08,0x08,0x08,0x08,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
0x08,0x18,0x18,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
0x08,0x08,0x08,0x08,0x08,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,

/*--  文字:  前  --*/
/*--  宋体23;  此字体下对应的点阵为：宽x高=31x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=31x32  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x1C,0x7C,0xF8,0xF0,0x60,0x00,0x00,
0x00,0x80,0xE0,0xFC,0x3C,0x1C,0x18,0x00,0x00,0x80,0xC0,0xC0,0x80,0x00,0x00,0x00,
0x01,0x03,0x03,0xFD,0xFD,0xFD,0x09,0x09,0x09,0x09,0x09,0xFD,0xFD,0xFD,0x09,0x01,
0x01,0xF1,0xF1,0xF1,0x01,0x01,0xFF,0xFF,0xFD,0x0D,0x01,0x01,0x01,0x00,0x00,0x00,
0x00,0x00,0xFF,0xFF,0xFF,0x21,0x21,0x21,0x21,0x21,0xFF,0xFF,0xFF,0x00,0x00,0x00,
0xFF,0xFF,0xFF,0x00,0x00,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x3F,0x3F,0x3F,0x00,0x00,0x08,0x18,0x38,0x3F,0x3F,0x0F,0x00,0x00,0x00,0x0B,
0x0B,0x19,0x18,0x38,0x3F,0x3F,0x0F,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  温  --*/
/*--  宋体23;  此字体下对应的点阵为：宽x高=31x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=31x32  --*/
0x00,0x00,0x00,0x08,0x18,0x38,0xF8,0xF0,0x20,0x80,0x80,0xF8,0xF8,0xF0,0x10,0x10,
0x10,0x10,0x10,0x10,0x10,0x10,0xF0,0xF8,0xF8,0x10,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x1C,0x7C,0x78,0x70,0x80,0xF0,0xFE,0x1F,0x01,0xFF,0xFF,0xFF,0x42,0x42,0x42,
0x42,0x42,0x42,0x42,0x42,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,
0x20,0x60,0xF0,0xFC,0xFF,0x1F,0x01,0xFE,0xFE,0xFD,0x05,0x04,0xFC,0xFC,0xFC,0x04,
0x04,0xFC,0xFC,0xFC,0x04,0x05,0xFE,0xFE,0xFE,0x04,0x00,0x00,0x00,0x00,0x00,0x00,
0x1E,0x1F,0x1F,0x1F,0x30,0x30,0x1F,0x1F,0x1F,0x10,0x10,0x1F,0x1F,0x1F,0x10,0x10,
0x1F,0x1F,0x1F,0x10,0x10,0x1F,0x1F,0x1F,0x18,0x18,0x10,0x00,

/*--  文字:  度  --*/
/*--  宋体23;  此字体下对应的点阵为：宽x高=31x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=31x32  --*/
0x00,0x00,0x00,0x00,0xF0,0xF0,0xF0,0x20,0x20,0x20,0x20,0x20,0xE0,0xE0,0xA6,0xBE,
0x3E,0x3C,0x38,0x20,0xE0,0xE0,0xA0,0xA0,0x20,0x30,0x38,0x30,0x20,0x00,0x00,0x00,
0x00,0x00,0x00,0xFF,0xFF,0xFF,0x04,0x0C,0x04,0x04,0x04,0xFF,0xFF,0xFF,0x84,0x84,
0x84,0x84,0x84,0xFF,0xFF,0xFF,0x04,0x04,0x06,0x06,0x06,0x04,0x00,0x00,0x00,0x00,
0x00,0xF0,0xFF,0xFF,0x0F,0x00,0x00,0x04,0x04,0x04,0x0F,0x3D,0x75,0xE4,0xC4,0x84,
0xC4,0xE4,0xF5,0x7D,0x3F,0x1E,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x38,0x3E,
0x0F,0x23,0x20,0x20,0x20,0x30,0x30,0x18,0x18,0x18,0x0C,0x0E,0x0E,0x07,0x07,0x07,
0x0F,0x0E,0x1C,0x1C,0x1C,0x18,0x38,0x38,0x38,0x18,0x08,0x00,

/*--  文字:  ：  --*/
/*--  宋体23;  此字体下对应的点阵为：宽x高=31x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=31x32  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x06,0x8F,0x8F,0x8F,0x8F,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x03,0x07,0x07,0x07,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
/* Global define */


#define LED0_PIN  35   //PC3

/* Global Variable */
rt_device_t dev;

/*********************************************************************
 * @fn      main
 *
 * @brief   Main program.
 *
 * @return  none
 */




int main(void)
{
    rt_kprintf("MCU: CH32V307\n");
	rt_kprintf("SysClk: %dHz\n",SystemCoreClock);
    rt_kprintf("www.wch.cn\n");
    rt_kprintf("per seconds = %d",RT_TICK_PER_SECOND);
	//LED1_BLINK_INIT();


	//rt_err_t ret = 0;
	//rt_size_t oled;
	rt_uint32_t i = 0;
	rt_thread_mdelay(2000);
    rt_kprintf("test\r\n");
	for(i = 0;i < 1000; i++)
	{
	  	rt_hw_us_delay(1000);
	  	//rt_kprintf("reload = %d",SysTick->CMP);
	}

    rt_kprintf("start count\r\n");

	/*GPIO_ResetBits(GPIOA,GPIO_Pin_0);

	dev = rt_device_find("OLED.0.96");
	if(dev == RT_NULL)
	{
	    LOG_E("oled find error\r\n");
	    return -RT_EINVAL;
	}

	ret = rt_device_init(dev);
	if(ret != RT_EOK)
	{
	    LOG_E("oled init error\r\n");
	    return -RT_EINVAL;
	}

	ret = rt_device_open(dev, RT_DEVICE_FLAG_RDONLY);
	if(ret != RT_EOK)
	{
	    LOG_E("oled device open error\r\n");
	    return -RT_EINVAL;
	}*/

	while(1)
	{


	    rt_thread_mdelay(1000);
	}
}


/*********************************************************************
 * @fn      led
 *
 * @brief   gpio operation by pins driver.
 *
 * @return  none
 */
int led(void)
{

rt_thread_mdelay(1);


    return 0;
}



MSH_CMD_EXPORT(led,  led sample by using I/O drivers);



